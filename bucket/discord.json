{
    "version": "1.0.9215",
    "description": "Group Chat That's All Fun & Games",
    "homepage": "https://discord.com",
    "license": "Freeware",
    "notes": [
        "Autostart: re-enable startup in Discord settings",
        "Notifications:",
        "- Run: scoop install makelnk; makelnk com.squirrel.Discord.Discord \"$dir\\Update.exe\" Discord \"--processStart Discord.exe\"",
        "- Navigate to: \"%APPDATA%\\Microsoft\\Windows\\Start Menu\\Programs\"",
        "- Right click Discord -> Properties -> Change icon -> \"$dir\\app.ico\""
    ],
    "architecture": {
        "64bit": {
            "url": "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/1.0.9215/DiscordSetup.exe#/dl.7z",
            "hash": "15c911b05945529704353eb11d4ea5e80c573d6480e13599d445e1a32f01bba1"
        },
        "arm64": {
            "url": "https://stable.dl2.discordapp.net/distro/app/stable/win/arm64/1.0.7/DiscordSetup.exe#/dl.7z",
            "hash": "8a5903d1532f5f31f810a7ba0117c0e061ae6dfbdb29cecb7614c8104279faa6"
        }
    },
    "pre_install": [
        "Expand-7zipArchive \"$dir\\Discord-$version-full.nupkg\" -ExtractDir 'lib\\net45' -DestinationPath \"$dir\\app-$version\" -Removal",
        "Move-Item \"$dir\\app-$version\\installer.db\" \"$dir\"",
        "Move-Item \"$dir\\app-$version\\app.ico\" \"$dir\"",
        "New-Item \"$dir\\packages\" -ItemType Directory | Out-Null",
        "Move-Item \"$dir\\RELEASES\" \"$dir\\packages\""
    ],
    "shortcuts": [
        [
            "Update.exe",
            "Discord",
            "--processStart Discord.exe",
            "app.ico"
        ]
    ],
    "post_uninstall": "Remove-Item \"$env:APPDATA\\Microsoft\\Windows\\Start Menu\\Programs\\Discord.lnk\" -ErrorAction SilentlyContinue",
    "checkver": {
        "script": [
            "$base = 'https://updates.discord.com/distributions/app/manifests/latest?channel=stable&platform=win&arch='",
            "$x64 = Invoke-RestMethod \"${base}x64\"",
            "$arm64 = Invoke-RestMethod \"${base}arm64\"",
            "Write-Output \"$($x64.full) $($arm64.full)\""
        ],
        "regex": "x64/(?<version>[\\d.]+)[\\s\\S]*arm64/(?<armVersion>[\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://stable.dl2.discordapp.net/distro/app/stable/win/x64/$matchVersion/DiscordSetup.exe#/dl.7z"
            },
            "arm64": {
                "url": "https://stable.dl2.discordapp.net/distro/app/stable/win/arm64/$matchArmVersion/DiscordSetup.exe#/dl.7z"
            }
        }
    }
}
